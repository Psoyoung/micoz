# Task ID: 8
# Title: 쇼핑카트 및 결제 프로세스 구현
# Status: done
# Dependencies: 4, 5, 7
# Priority: high
# Description: 다양한 결제 옵션과 배송 통합을 포함한 쇼핑카트 기능과 간소화된 결제 프로세스를 개발합니다.
# Details:
1. 쇼핑카트 기능 생성:
   - 제품 추가/제거
   - 수량 업데이트
   - 프로모션 코드 적용
   - 총 금액 및 할인 계산
2. 결제 프로세스 구현:
   - 진행 표시기가 있는 다단계 결제
   - 주소 선택/입력
   - 배송 방법 선택
   - 결제 수단 선택
3. 결제 게이트웨이 통합:
   - TossPayments
   - KakaoPay
   - NaverPay
4. 배송비 계산 및 추적 구현:
   - CJ 대한통운 API 통합
   - 롯데택배 API 통합
5. 주문 확인 및 추적 시스템 생성
6. 과다판매 방지를 위한 재고 관리 구현

# Test Strategy:
1. 전체 구매 플로우 종단 간 테스트
2. 결제 게이트웨이 통합 확인
3. 배송비 계산 정확성 테스트
4. 구매 후 재고 업데이트 확인
5. 프로모션 코드 적용 테스트
6. 주문 확인 이메일 확인
7. 주문 추적 기능 테스트

# Subtasks:
## 1. Implement Shopping Cart State Management and Core Functionality [done]
### Dependencies: None
### Description: Create the shopping cart data structure, state management, and core operations for adding, removing, and updating cart items with quantity management.
### Details:
Implement cart state using React Context or Redux with actions for addToCart, removeFromCart, updateQuantity, and clearCart. Create cart data structure to store product ID, variant info, quantity, and pricing. Include cart persistence using localStorage. Implement cart item validation and quantity limits based on inventory.

## 2. Build Shopping Cart UI and Promotion Code System [done]
### Dependencies: 8.1
### Description: Develop the shopping cart interface with item display, quantity controls, promotion code input, and dynamic total calculations with discounts.
### Details:
Create cart page/drawer component displaying cart items with product images, names, prices, and quantity controls. Implement promotion code input field with validation and discount application logic. Build dynamic pricing calculation showing subtotal, discounts, shipping, and final total. Include empty cart state and cart item removal confirmations.

## 3. Develop Multi-Step Checkout Process with Progress Tracking [done]
### Dependencies: 8.2
### Description: Create a streamlined multi-step checkout flow with progress indicators, address management, and shipping method selection.
### Details:
Build checkout stepper component with steps: Cart Review → Shipping Info → Payment → Confirmation. Implement address form with validation for Korean addresses, saved address selection, and new address creation. Create shipping method selection with delivery options and cost calculations. Include checkout progress persistence and back/forward navigation.

## 4. Integrate Payment Gateways (TossPayments, KakaoPay, NaverPay) [done]
### Dependencies: 8.3
### Description: Implement secure payment processing with multiple Korean payment gateway integrations and payment method selection interface.
### Details:
Integrate TossPayments SDK for card payments with PCI compliance. Implement KakaoPay and NaverPay APIs for alternative payment methods. Create payment method selection UI with secure card form or redirect flows. Handle payment success/failure callbacks, error handling, and payment verification. Implement payment retry logic and timeout handling.

## 5. Implement Order Management, Shipping Integration, and Inventory Control [done]
### Dependencies: 8.4
### Description: Create order confirmation system, integrate shipping APIs for tracking, and implement inventory management to prevent overselling.
### Details:
Build order creation and confirmation system with unique order IDs and customer notifications. Integrate CJ Logistics and Lotte Logistics APIs for shipping calculation and tracking. Implement real-time inventory checking and reservation during checkout to prevent overselling. Create order status updates, tracking number integration, and automated inventory adjustment after successful payment.

